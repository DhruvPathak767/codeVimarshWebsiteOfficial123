<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= pageTitle %>
  </title>
  <link rel="stylesheet" href="/output.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/profile.css">
  <link rel="stylesheet" href="/css/auth.css">
  <link rel="stylesheet" href="/css/buttons.css">
  <link rel="stylesheet" href="/css/animations.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;400;600;800&display=swap"
    rel="stylesheet">
</head>

<body class="antialiased selection:bg-primary selection:text-black">
  <canvas id="bg-canvas"></canvas>

  <div class="relative z-10 flex flex-col min-h-screen">
    <%- include('./partials/nav.ejs') %>

      <main class="flex-grow pt-24 pb-12">
        <div class="text-center mb-12 px-4">
          <h1 class="text-4xl md:text-5xl font-display font-bold mb-4">
            Edit <span class="text-gradient">Profile</span>
          </h1>
          <div class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
        </div>

        <section class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8">
          <div
            class="glass-effect p-8 md:p-10 rounded-2xl relative overflow-hidden animate-slide-up border border-white/10">
            <!-- Background Glow -->
            <div
              class="absolute top-0 right-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none">
            </div>

            <% if (errorMessage) { %>
              <div
                class="mb-6 bg-red-500/10 border border-red-500/50 text-red-200 px-4 py-3 rounded text-sm text-center">
                <%= errorMessage %>
              </div>
              <% } %>

                <form action="/profile/edit" method="POST" class="space-y-6">
                  <!-- Username -->
                  <div class="space-y-2">
                    <label for="username" class="text-secondary font-code text-xs uppercase tracking-widest block">Full
                      Name</label>
                    <input type="text" id="username" name="username" value="<%= user.username %>" required
                      class="w-full border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 transition-all duration-300 font-sans hover:border-white/20"
                      style="background-color: rgba(0,0,0,0.5);">
                  </div>

                  <!-- Department -->
                  <div class="space-y-2">
                    <label for="department"
                      class="text-secondary font-code text-xs uppercase tracking-widest block">Department</label>
                    <input type="text" id="department" name="department" value="<%= user.department %>" required
                      class="w-full border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 transition-all duration-300 font-sans hover:border-white/20"
                      style="background-color: rgba(0,0,0,0.5);">
                  </div>

                  <!-- Class -->
                  <div class="space-y-2">
                    <label for="class" class="text-secondary font-code text-xs uppercase tracking-widest block">Class /
                      Year</label>
                    <input type="text" id="class" name="class" value="<%= user.class %>" required
                      class="w-full border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/50 transition-all duration-300 font-sans hover:border-white/20"
                      style="background-color: rgba(0,0,0,0.5);">
                  </div>

                  <!-- PRN (Read-only) -->
                  <div class="space-y-2 opacity-70">
                    <label class="text-secondary font-code text-xs uppercase tracking-widest block">PRN Number
                      (Read-only)</label>
                    <input type="text" value="<%= user.prnNumber %>" disabled
                      class="w-full border border-white/5 rounded-lg px-4 py-3 text-text-muted font-sans cursor-not-allowed"
                      style="background-color: rgba(0,0,0,0.2);">
                  </div>

                  <!-- Email (Read-only) -->
                  <div class="space-y-2 opacity-70">
                    <label class="text-secondary font-code text-xs uppercase tracking-widest block">Email
                      (Read-only)</label>
                    <input type="email" value="<%= user.email %>" disabled
                      class="w-full border border-white/5 rounded-lg px-4 py-3 text-text-muted font-sans cursor-not-allowed"
                      style="background-color: rgba(0,0,0,0.2);">
                  </div>

                  <!-- Actions -->
                  <div class="flex items-center gap-4 pt-4">
                    <button type="submit"
                      class="flex-1 bg-primary text-black font-code font-bold uppercase tracking-wider text-sm py-3 rounded hover:bg-white hover:shadow-[0_0_20px_rgba(8,217,214,0.5)] transform hover:scale-105 transition-all duration-300">
                      Save Changes
                    </button>
                    <a href="/profile"
                      class="px-6 py-3 border border-white/10 text-text-muted font-code text-sm uppercase tracking-wider rounded hover:bg-white/10 hover:border-white/30 hover:text-white transform hover:scale-105 transition-all duration-300">
                      Cancel
                    </a>
                  </div>
                </form>

          </div>
        </section>
      </main>

      <%- include('./partials/footer.ejs') %>
  </div>
  <script src="/js/home.js"></script>
</body>

</html>