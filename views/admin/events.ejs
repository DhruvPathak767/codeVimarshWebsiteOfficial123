<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= pageTitle %>
  </title>
  <link rel="stylesheet" href="/output.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/admin.css">
  <link rel="stylesheet" href="/css/buttons.css">
  <link rel="stylesheet" href="/css/animations.css">
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;400;600;800&display=swap"
    rel="stylesheet">
</head>

<body class="antialiased selection:bg-primary selection:text-black">
  <canvas id="bg-canvas"></canvas>

  <div class="relative z-10 flex flex-col min-h-screen">
    <%- include('../partials/nav.ejs') %>

      <main class="flex-grow pt-24 pb-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
          <div class="flex justify-between items-center mb-12">
            <h1 class="text-3xl md:text-5xl font-display font-bold">
              Manage <span class="text-gradient">Events</span>
            </h1>
            <a href="/admin/events/new"
              class="btn-cyber px-6 py-3 text-sm font-bold rounded-sm uppercase tracking-wider">
              + Add New Event
            </a>
          </div>

          <% if (events.length> 0) { %>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
              <% for (let event of events) { %>
                <div
                  class="glass-effect rounded-2xl overflow-hidden border border-white/5 hover:border-primary/30 transition-all flex flex-col h-full">
                  <div class="relative w-full overflow-hidden bg-gray-900 group-hover:opacity-90 transition-opacity"
                    style="height: 200px;">
                    <img src="<%= event.image %>" alt="<%= event.title %>"
                      class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 hover:scale-110">

                  </div>
                  <div class="p-6 flex-grow flex flex-col">
                    <div class="flex items-center gap-2 text-xs font-code text-text-muted mb-2">
                      <span>
                        <%= new Date(event.date).toLocaleDateString('en-US', { month: 'short' , day: 'numeric' ,
                          year: 'numeric' }) %>
                      </span>
                      <span>â€¢</span>
                      <span>
                        <%= event.time %>
                      </span>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">
                      <%= event.title %>
                    </h3>
                    <p class="text-text-muted text-sm mb-6 flex-grow line-clamp-3">
                      <%= event.description %>
                    </p>
                    <div
                      class="relative  bg-black/70 backdrop-blur-md px-3 py-1 rounded-full border border-white/10 shadow-xl m-2 d">
                      <span class="text-xs font-code text-primary uppercase tracking-wider">
                        <%= event.type %>
                      </span>
                    </div>
                    <div class="flex gap-4 mt-auto pt-6 border-t border-white/5">
                      <a href="/admin/events/edit/<%= event._id %>?edit=true"
                        class="flex-1 flex items-center justify-center gap-2 py-2.5 rounded-sm text-sm font-bold uppercase tracking-wider border border-primary/50 text-primary bg-primary/10 hover:bg-primary/20 hover:shadow-[0_0_20px_rgba(8,217,214,0.4)] transform hover:scale-105 transition-all duration-300">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                        </svg>
                        Edit
                      </a>
                      <form action="/admin/events/delete" method="POST" class="flex-1">
                        <input type="hidden" name="eventId" value="<%= event._id %>">
                        <button type="submit"
                          class="w-full flex items-center justify-center gap-2 py-2.5 rounded-sm text-sm font-bold uppercase tracking-wider border border-red-500/50 text-red-500 bg-red-500/10 hover:bg-red-500/20 hover:shadow-[0_0_20px_rgba(239,68,68,0.4)] transform hover:scale-105 transition-all duration-300">
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                          </svg>
                          Delete
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
                <% } %>
            </div>
            <% } else { %>
              <div class="glass-effect p-12 rounded-2xl text-center border border-white/5">
                <div class="text-6xl mb-4">ğŸ“‚</div>
                <h2 class="text-2xl font-bold text-white mb-2">No Events Found</h2>
                <p class="text-text-muted mb-8">Get started by creating your first event.</p>
                <a href="/admin/events/new"
                  class="inline-block btn-cyber px-8 py-3 text-sm font-bold rounded-sm uppercase">
                  Create Event
                </a>
              </div>
              <% } %>
        </div>
      </main>

      <%- include('../partials/footer.ejs') %>
  </div>
  <script src="/js/home.js"></script>
</body>

</html>