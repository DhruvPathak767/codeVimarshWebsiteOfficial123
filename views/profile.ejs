<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= pageTitle %>
  </title>
  <link rel="stylesheet" href="/output.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/profile.css">
  <link rel="stylesheet" href="/css/buttons.css">
  <link rel="stylesheet" href="/css/animations.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;400;600;800&display=swap"
    rel="stylesheet">
</head>

<body class="antialiased selection:bg-primary selection:text-black">
  <canvas id="bg-canvas"></canvas>

  <div class="relative z-10 flex flex-col min-h-screen">
    <%- include('./partials/nav.ejs') %>

      <main class="flex-grow pt-24 pb-12">
        <div class="text-center mb-12 px-4">
          <h1 class="text-4xl md:text-5xl font-display font-bold mb-4">
            <span class="text-white">
              <%= user.username %>
            </span>
          </h1>
          <div class="w-24 h-1 bg-gradient-to-r from-primary to-secondary mx-auto rounded-full"></div>
        </div>

        <section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
          <div
            class="glass-effect p-8 md:p-12 rounded-2xl relative overflow-hidden animate-slide-up border border-white/10">
            <!-- Decorational background element -->
            <div
              class="absolute top-0 right-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none">
            </div>

            <div class="flex flex-col md:flex-row items-start gap-8 md:gap-12">
              <!-- Profile Sidebar -->
              <div class="w-full md:w-1/3 flex flex-col items-center">
                <div class="relative group mb-6">
                  <div
                    class="w-40 h-40 rounded-full bg-black/40 border-2 border-primary/50 overflow-hidden relative shadow-[0_0_20px_rgba(var(--color-primary),0.3)] group-hover:shadow-[0_0_30px_rgba(var(--color-primary),0.5)] transition-all duration-300 flex items-center justify-center">

                    <!-- Avatar Logic: Use Initials or Neutral SVG -->
                    <% const initials=user.username.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
                        const avatarUrl = `https://api.dicebear.com/7.x/initials/svg?seed=${user.username}&backgroundColor=00ff9d&textColor=000000&chars=2`;
                    %>
                      <img src="<%= avatarUrl %>" alt="<%= user.username %>" class="w-full h-full object-cover">

                  </div>
                  <!-- Active Status Indicator -->
                  
                </div>

                <div class="text-center w-full">
                  <span
                    class="inline-block px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary font-code text-xs font-bold tracking-wider mb-4">
                    <%= role %>
                  </span>

                  <div class="text-text-muted text-sm font-code mb-1">
                    Joined: <span class="text-white">
                      <%= new Date(user.createdAt).toLocaleDateString() %>
                    </span>
                  </div>
                </div>
              </div>

              <!-- User Details Grid -->
              <div class="flex-1 w-full">
                <!-- Section Header -->
                <div class="flex items-center justify-between mb-6 border-b border-white/10 pb-4">
                  <h2 class="text-xl font-display font-semibold text-white">Profile Details</h2>
                  <a href="/profile/edit"
                    class="text-primary hover:text-white transition-colors text-sm font-code flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                      stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                    </svg>
                    EDIT
                  </a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                  <!-- Username -->
                  <div class="bg-black/20 p-4 rounded-lg border border-white/5">
                    <span class="block text-secondary font-code text-xs uppercase tracking-widest mb-1">Username</span>
                    <span class="text-white font-medium text-lg">
                      <%= user.username %>
                    </span>
                  </div>

                  <!-- Email -->
                  <div class="bg-black/20 p-4 rounded-lg border border-white/5">
                    <span class="block text-secondary font-code text-xs uppercase tracking-widest mb-1">Email</span>
                    <span class="text-white font-medium text-lg truncate" title="<%= user.email %>">
                      <%= user.email %>
                    </span>
                  </div>

                  <!-- PRN -->
                  <div class="bg-black/20 p-4 rounded-lg border border-white/5">
                    <span class="block text-secondary font-code text-xs uppercase tracking-widest mb-1">PRN
                      Number</span>
                    <span class="text-white font-medium text-lg">
                      <%= user.prnNumber %>
                    </span>
                  </div>

                  <!-- Department -->
                  <div class="bg-black/20 p-4 rounded-lg border border-white/5">
                    <span
                      class="block text-secondary font-code text-xs uppercase tracking-widest mb-1">Department</span>
                    <span class="text-white font-medium text-lg">
                      <%= user.department %>
                    </span>
                  </div>

                  <!-- Class -->
                  <div class="bg-black/20 p-4 rounded-lg border border-white/5 md:col-span-2">
                    <span class="block text-secondary font-code text-xs uppercase tracking-widest mb-1">Class /
                      Year</span>
                    <span class="text-white font-medium text-lg">
                      <%= user.class %>
                    </span>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <%- include('./partials/footer.ejs') %>
                  </div>
                  <script src="/js/home.js"></script>
</body>

</html>